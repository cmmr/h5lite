% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/write_attr.r
\name{h5_write_attr}
\alias{h5_write_attr}
\title{Write an Attribute to HDF5}
\usage{
h5_write_attr(file, name, attribute, data, dtype = "auto")
}
\arguments{
\item{file}{Path to the HDF5 file.}

\item{name}{Name of the object to attach the attribute to (e.g., "/data").}

\item{attribute}{The name of the attribute to create.}

\item{data}{The R object to write. Supported: \code{numeric}, \code{integer},
\code{complex}, \code{logical}, \code{character}, \code{raw}, \code{data.frame}, and \code{NULL}.}

\item{dtype}{The target HDF5 data type. Can be one of \code{"auto"}, \code{"float16"},
\code{"float32"}, \code{"float64"}, \code{"int8"}, \code{"int16"}, \code{"int32"}, \code{"int64"}, \code{"uint8"},
\code{"uint16"}, \code{"uint32"}, or \code{"uint64"}. The default, \code{"auto"}, selects the
most space-efficient type for the data. See details below.}
}
\value{
Invisibly returns \code{NULL}. This function is called for its side effects.
}
\description{
Writes an R object as an attribute to an existing HDF5 object.
}
\section{Writing Scalars}{

By default, \code{h5_write} saves single-element vectors as 1-dimensional arrays.
To write a true HDF5 scalar, wrap the value in \code{I()} to treat it "as-is."
For example, \code{h5_write(file, "x", I(5))} will create a scalar dataset, while
\code{h5_write(file, "x", 5)} will create a 1D array of length 1.
}

\section{Writing NULL}{

If \code{data} is \code{NULL}, \code{h5_write} will create an HDF5 \strong{null dataset}. This is
a dataset with a null dataspace, which contains no data.
}

\section{Writing Data Frames}{

\code{data.frame} objects are written as HDF5 \strong{compound datasets}. This is a
native HDF5 table-like structure that is highly efficient and portable.
}

\section{Writing Complex Numbers}{

\code{h5lite} writes R \code{complex} objects using the native HDF5 \code{H5T_COMPLEX}
datatype class, which was introduced in HDF5 version 2.0.0. As a result,
HDF5 files containing complex numbers written by \code{h5lite} can only be read
by other HDF5 tools that support HDF5 version 2.0.0 or later.
}

\section{Data Type Selection (\code{dtype})}{

The \code{dtype} argument controls the on-disk storage type and only applies to
\code{integer}, \code{numeric}, and \code{logical} vectors. For all other data types
(\code{character}, \code{complex}, \code{factor}, \code{raw}), the storage type is determined
automatically.

If \code{dtype} is set to \code{"auto"} (the default), \code{h5lite} will automatically
select the most space-efficient HDF5 type based on the following rules:
\enumerate{
\item If the data contains fractional values (e.g., \code{1.5}), it is stored as
\code{float64}.
\item If the data contains \code{NA}, \code{NaN}, or \code{Inf}, it is stored using the
smallest floating-point type (\code{float16}, \code{float32}, or \code{float64}) that
can precisely represent all integer values in the vector.
\item If the data contains only finite integers (this includes \code{logical}
vectors, where \code{FALSE} is 0 and \code{TRUE} is 1), \code{h5lite} selects the
smallest possible integer type (e.g., \code{uint8}, \code{int16}).
\item If integer values exceed R's safe integer range (\verb{+/- 2^53}), they are
automatically stored as \code{float64} to preserve precision.
}

To override this automatic behavior, you can specify an exact type. The full
list of supported values is:
\itemize{
\item \code{"auto"}
\item \code{"float16"}, \code{"float32"}, \code{"float64"}
\item \code{"int8"}, \code{"int16"}, \code{"int32"}, \code{"int64"}
\item \code{"uint8"}, \code{"uint16"}, \code{"uint32"}, \code{"uint64"}
}
}

\examples{
file <- tempfile(fileext = ".h5")

# First, create an object to attach attributes to
h5_write(file, "my_data", 1:10, compress = FALSE)

# Write a scalar string attribute
h5_write_attr(file, "my_data", "units", I("meters"))

# Write a numeric vector attribute
h5_write_attr(file, "my_data", "range", c(0, 100))

# List attributes to confirm they were written
h5_ls_attr(file, "my_data")

unlink(file)
}
\seealso{
\code{\link[=h5_write]{h5_write()}}, \code{\link[=h5_read_attr]{h5_read_attr()}},
\code{vignette("attributes-in-depth")}
}

# h5lite

**h5lite** is an R package that provides a simple and lightweight
interface for reading and writing HDF5 files.

It is designed for R users who want to save and load common R objects
(vectors, factors, matrices, data.frames, lists, and NULLs) to an HDF5
file without needing to understand the low-level details of the HDF5
library.

## Why use h5lite?

`h5lite` is “opinionated” software that prioritizes simplicity and
safety for the most common use cases. It handles the tricky parts of
HDF5 automatically so you can focus on your data.

- **Simple, R-native API:** Use familiar functions like
  [`h5_read()`](https://cmmr.github.io/h5lite/reference/h5_read.md) and
  [`h5_write()`](https://cmmr.github.io/h5lite/reference/h5_write.md).
  No need to learn a complex new syntax.
- **“It Just Works” Philosophy:**
  - Dimensions are handled automatically. R matrices are saved as
    matrices and read back as matrices.
  - Parent groups are created as needed (e.g., writing to `"group/data"`
    works even if `"group"` doesn’t exist).
  - Writing to an existing dataset path overwrites it, just like
    re-assigning a variable.
- **Safe and Efficient:**
  - Numeric data is read back as `double` to prevent integer overflow
    surprises.
  - Automatic data type selection saves space by default (e.g., `1:100`
    is stored as an 8-bit integer).
  - Built-in, easy-to-use compression (`compress = TRUE`).
- **Easy Installation:** `h5lite` bundles its HDF5 dependency, so
  installation is a simple `install.packages("h5lite")`. No need to
  manage system libraries.

This package uses the HDF5 library developed by The HDF Group
(<https://www.hdfgroup.org/>).

## Installation

You can install the released version of `h5lite` from CRAN:

``` r
install.packages("h5lite")
```

Alternatively, you can install the development version from GitHub:

``` r
# install.packages("devtools")  
devtools::install_github("cmmr/h5lite")
```

## Quick Start

The API is designed to be simple and predictable.

``` r
library(h5lite)

file <- tempfile(fileext = ".h5")
```

### 1. Write Data

Use [`h5_write()`](https://cmmr.github.io/h5lite/reference/h5_write.md)
to save R objects. It automatically handles dimensions and chooses an
efficient on-disk data type.

``` r
# Write a vector
h5_write(file, "data/vector", 1:10)

# Write an R matrix
mat <- matrix(c(1.1, 2.2, 3.3, 4.4), nrow = 2, ncol = 2)
h5_write(file, "data/matrix", mat)

# Write a 3D array
arr <- array(1L:24L, dim = c(2, 3, 4))
h5_write(file, "data/array", arr)

# Write a scalar
h5_write(file, "scalar_string", I("Hello!"))

# Write a factor
fac <- as.factor(c("a", "b", "a", "c"))
h5_write(file, "factor_data", fac)

# Write a data.frame
h5_write(file, "mtcars", mtcars)
```

### 2. List Contents

Use [`h5_ls()`](https://cmmr.github.io/h5lite/reference/h5_ls.md) to see
the file structure.

``` r
# List all objects recursively
h5_ls(file, recursive = TRUE)
#> "mtcars"       "data"         "data/array"      "data/matrix"    
#> "data/vector"  "factor_data"  "scalar_string"  

# List only the top level
h5_ls(file, recursive = FALSE)
#> "mtcars"  "data"  "factor_data"  "scalar_string"
```

### 3. Read Data

Use [`h5_read()`](https://cmmr.github.io/h5lite/reference/h5_read.md) to
read data back into R. The function automatically restores the correct
dimensions.

``` r
# Read the matrix
mat_in <- h5_read(file, "data/matrix")
print(mat_in)
#>      [,1] [,2]
#> [1,]  1.1  3.3
#> [2,]  2.2  4.4

# Verify dimensions
print(dim(mat_in))
#> 2 2

all.equal(mat, mat_in)
#> TRUE
```

### 4. Attributes

You can easily read and write metadata using attributes.

``` r
# Write attributes to the "data/matrix" dataset
h5_write_attr(file, "data/matrix", "units", I("meters"))
h5_write_attr(file, "data/matrix", "scale", c(1.0, 1.0))

# List attributes
h5_ls_attr(file, "data/matrix")
#> "scale" "units"

# Read an attribute
units <- h5_read_attr(file, "data/matrix", "units")
print(units)
#> "meters"
```

## See Also

For more detailed guides on specific topics, see the package vignettes:

- **[Getting Started with
  h5lite](https://cmmr.github.io/h5lite/articles/h5lite.html)**: A
  general introduction.
- **[Working with Atomic
  Vectors](https://cmmr.github.io/h5lite/articles/atomic-vectors.html)**:
  Details on vectors and scalars.
- **[Working with Matrices and
  Arrays](https://cmmr.github.io/h5lite/articles/matrices.html)**:
  Handling multi-dimensional data.
- **[Working with Data
  Frames](https://cmmr.github.io/h5lite/articles/data-frames.html)**:
  Using compound datasets.
- **[Data
  Organization](https://cmmr.github.io/h5lite/articles/data-organization.html)**:
  Using groups and lists to structure files.
- **[Attributes
  In-Depth](https://cmmr.github.io/h5lite/articles/attributes-in-depth.html)**:
  A deep dive into metadata handling.
- **[Using h5lite with Parallel
  Processing](https://cmmr.github.io/h5lite/articles/parallel-io.html)**:
  Guide for multi-threaded and multi-process access.

You can also access these vignettes from within R using
`browseVignettes("h5lite")`.

## When to Use Another HDF5 Package

`h5lite` is intentionally simple. If you need advanced control over HDF5
features, you should use a more comprehensive package like **`rhdf5`**
(from Bioconductor) or **`hdf5r`** (from CRAN).

| Feature              | `h5lite`                                   | `rhdf5` / `hdf5r`                                           |
|----------------------|--------------------------------------------|-------------------------------------------------------------|
| **Primary Goal**     | Simplicity and safety for common R objects | Comprehensive control over all HDF5 features                |
| **API Style**        | Simple R functions (`h5_read`, `h5_write`) | Wrappers for the complete HDF5 C-API                        |
| **Ease of Use**      | **High**. Designed for R users.            | **Medium**. Requires some HDF5 knowledge.                   |
| **Installation**     | **Easy**. Bundled HDF5 library.            | Can be complex (`hdf5r` requires system library).           |
| **Dimension Order**  | **Automatic**. Transposes for you.         | **Manual**. User must manage C vs. R order.                 |
| **Numeric Safety**   | **Safe**. Reads numbers as `double`.       | **User’s choice**. Can read as integers (risk of overflow). |
| **Object Overwrite** | **Automatic**.                             | **Manual**. Requires check/delete first.                    |
| **Compression**      | Simple on/off (`compress = TRUE`).         | Full control over filters, chunking, etc.                   |

**Use `rhdf5` or `hdf5r` if you need to:** - Work with complex or custom
HDF5 data types not supported by `h5lite` (e.g., bitfields,
references). - Have fine-grained control over file properties, chunking,
or compression filters. - Perform partial I/O (i.e., read or write a
small slice of a very large on-disk dataset).

**Use `h5lite` if you want to:** - Quickly and safely save R matrices,
arrays, and other objects to a file. - Avoid thinking about low-level
details.

# Package index

## Read & Write

Functions for reading and writing datasets, attributes, and nested
lists.

- [`h5_read()`](https://cmmr.github.io/h5lite/reference/h5_read.md) :
  Read an HDF5 Object
- [`h5_read_attr()`](https://cmmr.github.io/h5lite/reference/h5_read_attr.md)
  : Read an HDF5 Attribute
- [`h5_write()`](https://cmmr.github.io/h5lite/reference/h5_write.md) :
  Write an R Object to HDF5
- [`h5_write_attr()`](https://cmmr.github.io/h5lite/reference/h5_write_attr.md)
  : Write an Attribute to HDF5

## Inspection & Discovery

Functions for exploring the contents and properties of an HDF5 file.

- [`h5_class()`](https://cmmr.github.io/h5lite/reference/h5_class.md) :
  Get R Class of an HDF5 Object
- [`h5_class_attr()`](https://cmmr.github.io/h5lite/reference/h5_class_attr.md)
  : Get R Class of an HDF5 Attribute
- [`h5_dim()`](https://cmmr.github.io/h5lite/reference/h5_dim.md) : Get
  HDF5 Object Dimensions
- [`h5_dim_attr()`](https://cmmr.github.io/h5lite/reference/h5_dim_attr.md)
  : Get HDF5 Attribute Dimensions
- [`h5_exists()`](https://cmmr.github.io/h5lite/reference/h5_exists.md)
  : Check if an HDF5 File or Object Exists
- [`h5_exists_attr()`](https://cmmr.github.io/h5lite/reference/h5_exists_attr.md)
  : Check if an HDF5 Attribute Exists
- [`h5_is_dataset()`](https://cmmr.github.io/h5lite/reference/h5_is_dataset.md)
  : Check if an HDF5 Object is a Dataset
- [`h5_is_group()`](https://cmmr.github.io/h5lite/reference/h5_is_group.md)
  : Check if an HDF5 Object is a Group
- [`h5_ls()`](https://cmmr.github.io/h5lite/reference/h5_ls.md) : List
  HDF5 Objects
- [`h5_ls_attr()`](https://cmmr.github.io/h5lite/reference/h5_ls_attr.md)
  : List HDF5 Attributes
- [`h5_str()`](https://cmmr.github.io/h5lite/reference/h5_str.md) :
  Display the Structure of an HDF5 Object
- [`h5_typeof()`](https://cmmr.github.io/h5lite/reference/h5_typeof.md)
  : Get HDF5 Object Type
- [`h5_typeof_attr()`](https://cmmr.github.io/h5lite/reference/h5_typeof_attr.md)
  : Get HDF5 Attribute Type

## Object Management

Functions for creating and deleting groups, datasets, and attributes.

- [`h5_create_file()`](https://cmmr.github.io/h5lite/reference/h5_create_file.md)
  : Create an HDF5 File
- [`h5_create_group()`](https://cmmr.github.io/h5lite/reference/h5_create_group.md)
  : Create an HDF5 Group
- [`h5_delete()`](https://cmmr.github.io/h5lite/reference/h5_delete.md)
  : Delete an HDF5 Object
- [`h5_delete_attr()`](https://cmmr.github.io/h5lite/reference/h5_delete_attr.md)
  : Delete an HDF5 Attribute
- [`h5_move()`](https://cmmr.github.io/h5lite/reference/h5_move.md) :
  Move or Rename an HDF5 Object

# Articles

### All vignettes

- [Working with Atomic
  Vectors](https://cmmr.github.io/h5lite/articles/atomic-vectors.md):
- [Attributes
  In-Depth](https://cmmr.github.io/h5lite/articles/attributes-in-depth.md):
- [Working with Data
  Frames](https://cmmr.github.io/h5lite/articles/data-frames.md):
- [Data
  Organization](https://cmmr.github.io/h5lite/articles/data-organization.md):
- [Getting Started with
  h5lite](https://cmmr.github.io/h5lite/articles/h5lite.md):
- [Working with Matrices and
  Arrays](https://cmmr.github.io/h5lite/articles/matrices.md):
- [Using h5lite with Parallel
  Processing](https://cmmr.github.io/h5lite/articles/parallel-io.md):

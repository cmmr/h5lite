<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Data Types &amp; Compression • h5lite</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Noto_Sans-0.4.10/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Data Types &amp; Compression">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">h5lite</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/h5lite.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/atomic-vectors.html">Atomic Vectors</a></li>
    <li><a class="dropdown-item" href="../articles/attributes-in-depth.html">Attributes In-Depth</a></li>
    <li><a class="dropdown-item" href="../articles/data-frames.html">Data Frames</a></li>
    <li><a class="dropdown-item" href="../articles/data-organization.html">Data Organization</a></li>
    <li><a class="dropdown-item" href="../articles/data-types.html">Data Types &amp; Compression</a></li>
    <li><a class="dropdown-item" href="../articles/matrices.html">Matrices and Arrays</a></li>
    <li><a class="dropdown-item" href="../articles/oo-interface.html">Object-Oriented Interface</a></li>
    <li><a class="dropdown-item" href="../articles/parallel-io.html">Parallel Processing</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/cmmr/h5lite/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Data Types &amp; Compression</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/cmmr/h5lite/blob/master/vignettes/data-types.Rmd" class="external-link"><code>vignettes/data-types.Rmd</code></a></small>
      <div class="d-none name"><code>data-types.Rmd</code></div>
    </div>

    
    
<p><code>h5lite</code> is designed to seamlessly map R’s diverse data
structures to HDF5’s portable format. This vignette explains the
supported R data types, how <code>h5lite</code> writes them to HDF5, and
how you can precisely control data types and compression when
needed.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/cmmr/h5lite" class="external-link">h5lite</a></span><span class="op">)</span></span>
<span><span class="va">file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".h5"</span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="supported-data-types">Supported Data Types<a class="anchor" aria-label="anchor" href="#supported-data-types"></a>
</h2>
<p><code>h5lite</code> supports reading and writing a wide range of R
data types. The table below lists the default mapping when writing to
HDF5.</p>
<table class="table">
<colgroup>
<col width="18%">
<col width="21%">
<col width="60%">
</colgroup>
<thead><tr class="header">
<th align="left">R Data Type</th>
<th align="left">HDF5 Equivalent</th>
<th align="left">Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Numeric</strong></td>
<td align="left"><em>variable</em></td>
<td align="left">Selects optimal type: <code>uint8</code>,
<code>float32</code>, etc.</td>
</tr>
<tr class="even">
<td align="left"><strong>Logical</strong></td>
<td align="left"><code>H5T_STD_U8LE</code></td>
<td align="left">Stored as 0 (FALSE) or 1 (TRUE)
(<code>uint8</code>).</td>
</tr>
<tr class="odd">
<td align="left"><strong>Character</strong></td>
<td align="left"><code>H5T_STRING</code></td>
<td align="left">Variable or fixed-length UTF-8 strings.</td>
</tr>
<tr class="even">
<td align="left"><strong>Complex</strong></td>
<td align="left"><code>H5T_COMPLEX</code></td>
<td align="left">Native HDF5 2.0+ complex numbers.</td>
</tr>
<tr class="odd">
<td align="left"><strong>Raw</strong></td>
<td align="left"><code>H5T_OPAQUE</code></td>
<td align="left">Raw bytes / binary data.</td>
</tr>
<tr class="even">
<td align="left"><strong>Factor</strong></td>
<td align="left"><code>H5T_ENUM</code></td>
<td align="left">Integer indices with label mapping.</td>
</tr>
<tr class="odd">
<td align="left"><strong>integer64</strong></td>
<td align="left"><code>H5T_STD_I64LE</code></td>
<td align="left">64-bit signed integers via <code>bit64</code>
package.</td>
</tr>
<tr class="even">
<td align="left"><strong>POSIXt</strong></td>
<td align="left"><code>H5T_STRING</code></td>
<td align="left">ISO 8601 string
(<code>YYYY-MM-DDTHH:MM:SSZ</code>).</td>
</tr>
<tr class="odd">
<td align="left"><strong>List</strong></td>
<td align="left"><code>H5O_TYPE_GROUP</code></td>
<td align="left">Recursive container structure.</td>
</tr>
<tr class="even">
<td align="left"><strong>Data Frame</strong></td>
<td align="left"><code>H5T_COMPOUND</code></td>
<td align="left">Table of mixed types.</td>
</tr>
<tr class="odd">
<td align="left"><strong>NULL</strong></td>
<td align="left"><code>H5S_NULL</code></td>
<td align="left">Creates a placeholder.</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="dimensions-scalars-vectors-and-arrays">Dimensions: Scalars, Vectors, and Arrays<a class="anchor" aria-label="anchor" href="#dimensions-scalars-vectors-and-arrays"></a>
</h2>
<p>Atomic data types (Integer, integer64, Double, Logical, Character,
Complex, Raw, and POSIXt) can be written to HDF5 as scalars, 1D vectors,
or N-dimensional arrays.</p>
<ul>
<li>
<strong>Scalars:</strong> To write a single value as a true HDF5
scalar (0 dimensions), you must wrap the value in <code><a href="https://rdrr.io/r/base/AsIs.html" class="external-link">I()</a></code>.</li>
<li>
<strong>Vectors:</strong> Standard R vectors are written as 1D
arrays (Simple Dataspace with rank 1).</li>
<li>
<strong>Arrays/Matrices:</strong> R objects with <code>dim</code>
attributes are written as N-dimensional datasets, preserving their
shape.</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 1. Scalar (0 dims)</span></span>
<span><span class="fu"><a href="../reference/h5_write.html">h5_write</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/AsIs.html" class="external-link">I</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span>, <span class="va">file</span>, <span class="st">"structure/scalar"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 2. Vector (1 dim)</span></span>
<span><span class="fu"><a href="../reference/h5_write.html">h5_write</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>, <span class="va">file</span>, <span class="st">"structure/vector"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 3. Matrix (2 dims)</span></span>
<span><span class="fu"><a href="../reference/h5_write.html">h5_write</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">9</span>, <span class="fl">3</span>, <span class="fl">3</span><span class="op">)</span>, <span class="va">file</span>, <span class="st">"structure/matrix"</span><span class="op">)</span></span></code></pre></div>
<p><em>For more complex dimensional structures, refer to the
<strong>“Matrices and Arrays”</strong> vignette.</em></p>
</div>
<div class="section level2">
<h2 id="numeric-data">Numeric Data<a class="anchor" aria-label="anchor" href="#numeric-data"></a>
</h2>
<p>R uses 32-bit integers and 64-bit doubles. When writing with
<code>as = "auto"</code>, <code>h5lite</code> analyzes the range of your
data to select the most compact HDF5 type.</p>
<ul>
<li>
<strong>Default:</strong> Selects optimal type based on range of
values.</li>
<li>
<strong>With NA:</strong> <code>float64</code>
(<code>H5T_IEEE_F64LE</code>)</li>
<li>
<strong>Fractional Values:</strong> Double-precision vectors with
fractional values default to <code>float64</code>.</li>
<li>
<strong>Coercion:</strong> You can override this using
<code>int[8|16|32|64]</code>, <code>uint[8|16|32|64]</code>,
<code>float[16|32|64]</code>, or <code>bfloat16</code>.</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Standard integers -&gt; int32</span></span>
<span><span class="fu"><a href="../reference/h5_write.html">h5_write</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">2L</span>, <span class="fl">3L</span><span class="op">)</span>, <span class="va">file</span>, <span class="st">"integers/clean"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Integers with NA -&gt; float64</span></span>
<span><span class="fu"><a href="../reference/h5_write.html">h5_write</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="cn">NA</span>, <span class="fl">3L</span><span class="op">)</span>, <span class="va">file</span>, <span class="st">"integers/with_na"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Force smaller type (int16)</span></span>
<span><span class="fu"><a href="../reference/h5_write.html">h5_write</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">100</span>, <span class="va">file</span>, <span class="st">"integers/short"</span>, as <span class="op">=</span> <span class="st">"int16"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="bit-integers-integer64">64-bit Integers (<code>integer64</code>)<a class="anchor" aria-label="anchor" href="#bit-integers-integer64"></a>
</h2>
<ul>
<li>
<strong>Default:</strong> <code>int64</code>
(<code>H5T_STD_I64LE</code>)</li>
<li>
<strong>Coercion:</strong> none</li>
</ul>
<p>R does not natively support 64-bit integers, but <code>h5lite</code>
supports reading and writing them via the <code>bit64</code>
package.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"bit64"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">val</span> <span class="op">&lt;-</span> <span class="fu">bit64</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/bit64/man/as.integer64.character.html" class="external-link">as.integer64</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"9223372036854775807"</span>, <span class="st">"-9223372036854775807"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="../reference/h5_write.html">h5_write</a></span><span class="op">(</span><span class="va">val</span>, <span class="va">file</span>, <span class="st">"integers/int64"</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="double-numeric-data">Double (Numeric) Data<a class="anchor" aria-label="anchor" href="#double-numeric-data"></a>
</h2>
<p>R’s default numeric type is double-precision.</p>
<ul>
<li>
<strong>Default:</strong> <code>float64</code>
(<code>H5T_IEEE_F64LE</code>)</li>
<li>
<strong>Coercion:</strong> <code>int[8|16|32|64]</code>,
<code>uint[8|16|32|64]</code>, <code>float[16|32|64]</code>, or
<code>bfloat16</code>
</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Default (float64)</span></span>
<span><span class="fu"><a href="../reference/h5_write.html">h5_write</a></span><span class="op">(</span><span class="va">data</span>, <span class="va">file</span>, <span class="st">"doubles/default"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Single Precision (float32) - Saves 50% space</span></span>
<span><span class="fu"><a href="../reference/h5_write.html">h5_write</a></span><span class="op">(</span><span class="va">data</span>, <span class="va">file</span>, <span class="st">"doubles/float32"</span>, as <span class="op">=</span> <span class="st">"float32"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="logical-data">Logical Data<a class="anchor" aria-label="anchor" href="#logical-data"></a>
</h2>
<ul>
<li>
<strong>Default:</strong> <code>uint8</code>
(<code>H5T_STD_U8LE</code>)</li>
<li>
<strong>With NA:</strong> <code>float64</code>
(<code>H5T_IEEE_F64LE</code>)</li>
<li>
<strong>Coercion:</strong> <code>int[8|16|32|64]</code>,
<code>uint[8|16|32|64]</code>, <code>float[16|32|64]</code>, or
<code>bfloat16</code>
</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bools</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span>, <span class="fl">1000</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/h5_write.html">h5_write</a></span><span class="op">(</span><span class="va">bools</span>, <span class="va">file</span>, <span class="st">"logicals/packed"</span><span class="op">)</span></span></code></pre></div>
<p>HDF5 supports two methods for storing strings. By default
(<code>as = "auto"</code>), <code>h5lite</code> chooses the best
approach:</p>
<ul>
<li>
<strong>Variable-Length:</strong> Used if the vector contains
<code>NA</code> or if string lengths are highly inconsistent.</li>
<li>
<strong>Fixed-Length:</strong> Used for short, consistent strings
without <code>NA</code> to allow for compression.</li>
</ul>
<div class="section level3">
<h3 id="variable-length">
<strong>Variable-Length:</strong><a class="anchor" aria-label="anchor" href="#variable-length"></a>
</h3>
<p>Explicitly requested with <code>as = "utf8"</code> or
<code>as = "ascii"</code>.</p>
<ul>
<li>Compressible: <strong>NO</strong>
</li>
<li>Handles <code>NA</code>: <strong>YES</strong>
</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># UTF-8 variable length</span></span>
<span><span class="fu"><a href="../reference/h5_write.html">h5_write</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"apple"</span>, <span class="st">"banana"</span>, <span class="cn">NA</span><span class="op">)</span>, <span class="va">file</span>, <span class="st">"strings/var_utf8"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># ASCII variable length</span></span>
<span><span class="fu"><a href="../reference/h5_write.html">h5_write</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="cn">NA</span><span class="op">)</span>, <span class="va">file</span>, <span class="st">"strings/var_ascii"</span>, as <span class="op">=</span> <span class="st">"ascii"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="fixed-length">
<strong>Fixed-Length:</strong><a class="anchor" aria-label="anchor" href="#fixed-length"></a>
</h3>
<p>Use <code>as = "ascii[10]"</code>/<code>as = "utf8[10]"</code>
(explicit size=10) or
<code>as = "ascii[]"</code>/<code>as = "utf8[]"</code> (auto-detect max
length).</p>
<ul>
<li>Compressible: <strong>YES</strong>
</li>
<li>Handles <code>NA</code>: <strong>NO</strong>
</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># UTF-8 auto-detected fixed length</span></span>
<span><span class="fu"><a href="../reference/h5_write.html">h5_write</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"apple"</span>, <span class="st">"banana"</span><span class="op">)</span>, <span class="va">file</span>, <span class="st">"strings/fixed_utf8"</span>, as <span class="op">=</span> <span class="st">"utf8[]"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># ASCII fixed length (1 byte)</span></span>
<span><span class="fu"><a href="../reference/h5_write.html">h5_write</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span><span class="op">)</span>, <span class="va">file</span>, <span class="st">"strings/fixed_ascii"</span>, as <span class="op">=</span> <span class="st">"ascii[1]"</span><span class="op">)</span></span></code></pre></div>
<blockquote>
<p><strong>Technical Note:</strong> <code>h5lite</code> uses
<code>H5T_C_S1</code> for all strings, and <code>H5T_STR_NULLTERM</code>
for all fixed length strings.</p>
</blockquote>
</div>
</div>
<div class="section level2">
<h2 id="dates-and-times-posixt">Dates and Times (<code>POSIXt</code>)<a class="anchor" aria-label="anchor" href="#dates-and-times-posixt"></a>
</h2>
<p>R date-time objects (<code>POSIXct</code> / <code>POSIXlt</code>) are
stored as <strong>Strings</strong> in ISO 8601 format
(<code>YYYY-MM-DDTHH:MM:SSZ</code>). This ensures maximum portability
with other languages and HDF5 tools that do not share R’s specific
epoch-based integer representation.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">now</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/h5_write.html">h5_write</a></span><span class="op">(</span><span class="va">now</span>, <span class="va">file</span>, <span class="st">"datetime/iso8601"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="complex-data">Complex Data<a class="anchor" aria-label="anchor" href="#complex-data"></a>
</h2>
<p>R complex numbers are written using the new complex floating-point
type introduced in HDF5 2.0.0 (<code>H5T_COMPLEX_IEEE_F64LE</code>).</p>
<p><strong>Compatibility Warning:</strong> This data type for complex
numbers is a feature specific to HDF5 version 2.0+. Datasets written
with this type generally cannot be read by HDF5 readers built against
older versions of the library (e.g., HDF5 1.10 or 1.12). Ensure that any
downstream tools or libraries used to read these files are updated to
support HDF5 2.0 standards.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">comp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">+</span><span class="fl">2i</span>, <span class="fl">3</span><span class="op">+</span><span class="fl">4i</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/h5_write.html">h5_write</a></span><span class="op">(</span><span class="va">comp</span>, <span class="va">file</span>, <span class="st">"complex_data"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="raw-data">Raw Data<a class="anchor" aria-label="anchor" href="#raw-data"></a>
</h2>
<p>Raw vectors (bytes) are stored as HDF5 <code>OPAQUE</code> types.
This is ideal for storing binary blobs, images, or serialized objects
where you need to preserve the exact byte sequence without
interpretation.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">raw_vec</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/raw.html" class="external-link">as.raw</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0x01</span>, <span class="fl">0xFF</span>, <span class="fl">0x1A</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/h5_write.html">h5_write</a></span><span class="op">(</span><span class="va">raw_vec</span>, <span class="va">file</span>, <span class="st">"binary_blob"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="factors">Factors<a class="anchor" aria-label="anchor" href="#factors"></a>
</h2>
<p>R Factors are stored as HDF5 <code>ENUM</code> types. This maps the
integer codes to the factor levels (labels) efficiently within the file
header, ensuring the labels are preserved without duplicating string
data for every element.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fac</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"low"</span>, <span class="st">"high"</span>, <span class="st">"medium"</span>, <span class="st">"low"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/h5_write.html">h5_write</a></span><span class="op">(</span><span class="va">fac</span>, <span class="va">file</span>, <span class="st">"categorical"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="lists">Lists<a class="anchor" aria-label="anchor" href="#lists"></a>
</h2>
<p>R lists are mapped to HDF5 <strong>Groups</strong>. Since lists are
recursive containers, <code>h5lite</code> walks the list and creates a
dataset (or subgroup) for every element found. You can use
<code>as = c("element_name" = "skip")</code> to exclude specific
items.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">100</span>, meta <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>valid <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/h5_write.html">h5_write</a></span><span class="op">(</span><span class="va">my_list</span>, <span class="va">file</span>, <span class="st">"types/list"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="data-frames">Data Frames<a class="anchor" aria-label="anchor" href="#data-frames"></a>
</h2>
<p>Data Frames are stored as HDF5 <strong>Compound</strong> types
(tables). This ensures that rows are kept together in memory. You can
use the <code>as</code> argument to specify the type of individual
columns.</p>
<p><em>For a comprehensive guide, see the <strong>“Data Frames”</strong>
vignette.</em></p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span>,</span>
<span>  score <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10.5</span>, <span class="fl">20.2</span>, <span class="fl">15.0</span>, <span class="fl">9.8</span>, <span class="fl">30.1</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 1. 'id' coerced to uint16</span></span>
<span><span class="co"># 2. 'score' coerced to float32</span></span>
<span><span class="fu"><a href="../reference/h5_write.html">h5_write</a></span><span class="op">(</span><span class="va">df</span>, <span class="va">file</span>, <span class="st">"types/dataframe"</span>, as <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"id"</span>    <span class="op">=</span> <span class="st">"uint16"</span>,</span>
<span>  <span class="st">"score"</span> <span class="op">=</span> <span class="st">"float32"</span></span>
<span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="null">NULL<a class="anchor" aria-label="anchor" href="#null"></a>
</h2>
<p>The <code>NULL</code> object in R is mapped to a dataset with a
<strong>NULL Dataspace</strong> (<code>H5S_NULL</code>). This creates a
dataset that exists in the file structure but contains no data elements
and consumes no storage space.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/h5_write.html">h5_write</a></span><span class="op">(</span><span class="cn">NULL</span>, <span class="va">file</span>, <span class="st">"placeholders/empty_slot"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="compression">Compression<a class="anchor" aria-label="anchor" href="#compression"></a>
</h2>
<p>HDF5 supports transparent data compression using the zlib (deflate)
algorithm. You can control the compression intensity using the
<code>compress</code> argument.</p>
<ul>
<li>
<strong><code>TRUE</code></strong>: Enables standard compression
(Level 5).</li>
<li>
<strong><code>FALSE</code> / <code>0</code></strong>: Disables
compression.</li>
<li>
<strong><code>1</code> - <code>9</code></strong>: Specific
compression level (1 = fastest, 9 = most compressed).</li>
</ul>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Maximum compression</span></span>
<span><span class="fu"><a href="../reference/h5_write.html">h5_write</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">1000</span><span class="op">)</span>, <span class="va">file</span>, <span class="st">"data/max"</span>, compress <span class="op">=</span> <span class="fl">9</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="the-shuffle-filter">The Shuffle Filter<a class="anchor" aria-label="anchor" href="#the-shuffle-filter"></a>
</h3>
<p>When compression is enabled (level &gt; 0), <code>h5lite</code>
automatically applies the HDF5 <strong>Byte Shuffle Filter</strong>
before the data is compressed. The Shuffle Filter does not compress data
itself; rather, it rearranges the byte stream to make it more
compressible by zlib.</p>
<p>It works by separating the bytes of each value by their significance.
For example, in a 4-byte integer array:</p>
<ol style="list-style-type: decimal">
<li>All the 1st bytes (least significant) are grouped together.</li>
<li>All the 2nd bytes are grouped together.</li>
<li>And so on.</li>
</ol>
<p><strong>Why this helps:</strong> * <strong>Integers:</strong> Small
integers often have many zero-padding bytes. The shuffle filter groups
these zeros into long runs, which zlib compresses extremely efficiently.
This allows <code>int32</code> data to compress nearly as well as
<code>int8</code> data if the values are small. *
<strong>Doubles:</strong> Floating point numbers often share the same
exponent bytes if they are in a similar range. The shuffle filter groups
these identical exponent bytes, creating repetitive patterns that zlib
can compress.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Daniel P. Smith, Alkek Center for Metagenomics and Microbiome Research.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>

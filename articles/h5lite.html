<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Getting Started with h5lite • h5lite</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Getting Started with h5lite">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">h5lite</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/h5lite.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Getting Started with h5lite</h1>
            
      

      <div class="hidden name"><code>h5lite.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://cmmr.github.io/h5lite/" class="external-link">h5lite</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># We'll use a temporary file for this guide.</span></span>
<span><span class="va">file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".h5"</span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The <code>h5lite</code> package provides a simple, lightweight, and
user-friendly interface for reading and writing HDF5 files. It is
designed for R users who want to save and load R objects (vectors,
matrices, arrays) to an HDF5 file without needing to understand the
low-level details of the HDF5 C API.</p>
<p>This guide will walk you through a common use case: simulating
experimental data, saving it to an HDF5 file along with metadata, and
then reading it back for analysis.</p>
<div class="section level3">
<h3 id="what-is-an-hdf5-file">What is an HDF5 File?<a class="anchor" aria-label="anchor" href="#what-is-an-hdf5-file"></a>
</h3>
<p>Think of an HDF5 file as a self-contained file system. It’s a single
file on disk that can hold an organized hierarchy of your data. The
three most important concepts are:</p>
<ul>
<li>
<strong>Groups:</strong> These are like folders or directories. You
use them to organize your data. Groups can contain other groups to
create a nested structure.</li>
<li>
<strong>Datasets:</strong> These are like files in a file system. A
dataset stores your actual data, such as a vector, matrix, or
multi-dimensional array. Every dataset resides inside a group.</li>
<li>
<strong>Attributes:</strong> These are small, named pieces of
metadata that you can attach to either groups or datasets. They are
perfect for storing extra information like units, descriptions, or
configuration parameters.</li>
</ul>
<p><code>h5lite</code> is designed to make working with this structure
feel natural to an R user.</p>
</div>
</div>
<div class="section level2">
<h2 id="writing-datasets">1. Writing Datasets<a class="anchor" aria-label="anchor" href="#writing-datasets"></a>
</h2>
<p>The primary function for writing data is <code><a href="../reference/h5_write.html">h5_write()</a></code>. It
creates a <strong>dataset</strong> inside the HDF5 file and
automatically handles:</p>
<ul>
<li>Creating the HDF5 file itself if it doesn’t exist.</li>
<li>Creating parent <strong>groups</strong> as needed.</li>
<li>Overwriting any existing dataset at the same path.</li>
</ul>
<p>Let’s start by writing a matrix of simulated sensor readings to a
dataset.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># A 3x4 matrix of sensor data</span></span>
<span><span class="va">sensor_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">12</span>, mean <span class="op">=</span> <span class="fl">25</span>, sd <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">3</span>, ncol <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/h5_write.html">h5_write</a></span><span class="op">(</span><span class="va">file</span>, <span class="st">"experiment_1/sensor_readings"</span>, <span class="va">sensor_data</span><span class="op">)</span></span></code></pre></div>
<p>That’s it! You’ve just created an HDF5 file and stored a matrix in
it.</p>
<blockquote>
<p><strong>Helpful Tip:</strong> Notice the name
<code>"experiment_1/sensor_readings"</code>. <code>h5lite</code>
automatically created the group <code>experiment_1</code> before
creating the dataset <code>sensor_readings</code> inside it.</p>
</blockquote>
<div class="section level3">
<h3 id="specifying-data-types">Specifying Data Types<a class="anchor" aria-label="anchor" href="#specifying-data-types"></a>
</h3>
<p>By default (<code>dtype = "auto"</code>), <code>h5lite</code>
automatically chooses the most space-efficient data type that can safely
store your numeric data. For example, small integers are stored as
<code>int8</code> or <code>uint8</code> instead of <code>double</code>
to save space.</p>
<p>You can override this by specifying a <code>dtype</code>. Let’s save
some integer identifiers, explicitly telling <code>h5lite</code> to use
a 32-bit integer type.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">trial_ids</span> <span class="op">&lt;-</span> <span class="fl">1L</span><span class="op">:</span><span class="fl">12L</span></span>
<span><span class="fu"><a href="../reference/h5_write.html">h5_write</a></span><span class="op">(</span><span class="va">file</span>, <span class="st">"experiment_1/trial_ids"</span>, <span class="va">trial_ids</span>, dtype <span class="op">=</span> <span class="st">"int32"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="writing-scalars">Writing Scalars<a class="anchor" aria-label="anchor" href="#writing-scalars"></a>
</h3>
<p>To write a single value as a scalar instead of an array, you must
specify <code>dims = NULL</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/h5_write.html">h5_write</a></span><span class="op">(</span><span class="va">file</span>, <span class="st">"experiment_1/run_id"</span>, <span class="st">"run-abc-123"</span>, dims <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="inspecting-the-file">2. Inspecting the File<a class="anchor" aria-label="anchor" href="#inspecting-the-file"></a>
</h2>
<p>Now that we’ve written some data, how do we see what’s in the
file?</p>
<div class="section level3">
<h3 id="listing-objects">Listing Objects<a class="anchor" aria-label="anchor" href="#listing-objects"></a>
</h3>
<p><code><a href="../reference/h5_ls.html">h5_ls()</a></code> lists the objects (groups and datasets) in the
file. By default, it lists everything recursively.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/h5_ls.html">h5_ls</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "experiment_1"                 "experiment_1/run_id"         </span></span>
<span><span class="co">#&gt; [3] "experiment_1/sensor_readings" "experiment_1/trial_ids"</span></span></code></pre></div>
<p>To see only the top-level objects, use
<code>recursive = FALSE</code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/h5_ls.html">h5_ls</a></span><span class="op">(</span><span class="va">file</span>, recursive <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "experiment_1"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="checking-dimensions-and-types">Checking Dimensions and Types<a class="anchor" aria-label="anchor" href="#checking-dimensions-and-types"></a>
</h3>
<p>You can inspect a dataset’s properties without reading all of its
data. This is useful for very large datasets.</p>
<ul>
<li>
<code><a href="../reference/h5_dim.html">h5_dim()</a></code> returns the dimensions in R’s standard,
column-major order.</li>
<li>
<code><a href="../reference/h5_typeof.html">h5_typeof()</a></code> returns the underlying HDF5 storage
type.</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">sensor_data</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 3 4</span></span>
<span><span class="fu"><a href="../reference/h5_dim.html">h5_dim</a></span><span class="op">(</span><span class="va">file</span>, <span class="st">"experiment_1/sensor_readings"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 3 4</span></span>
<span></span>
<span><span class="fu"><a href="../reference/h5_typeof.html">h5_typeof</a></span><span class="op">(</span><span class="va">file</span>, <span class="st">"experiment_1/trial_ids"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "int32"</span></span>
<span><span class="fu"><a href="../reference/h5_typeof.html">h5_typeof</a></span><span class="op">(</span><span class="va">file</span>, <span class="st">"experiment_1/sensor_readings"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "float64"</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="reading-data">3. Reading Data<a class="anchor" aria-label="anchor" href="#reading-data"></a>
</h2>
<p>To read data back into R, use <code><a href="../reference/h5_read.html">h5_read()</a></code>. It
automatically handles transposing the data from HDF5’s row-major order
to R’s column-major order and restores the correct dimensions.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">read_sensor_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/h5_read.html">h5_read</a></span><span class="op">(</span><span class="va">file</span>, <span class="st">"experiment_1/sensor_readings"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">read_sensor_data</span><span class="op">)</span></span>
<span><span class="co">#&gt;          [,1]     [,2]     [,3]     [,4]</span></span>
<span><span class="co">#&gt; [1,] 24.29998 24.99721 24.08909 24.85865</span></span>
<span><span class="co">#&gt; [2,] 25.12766 25.31078 24.87634 24.72315</span></span>
<span><span class="co">#&gt; [3,] 23.78137 25.57421 24.87790 25.31449</span></span>
<span></span>
<span><span class="co"># Verify that the object is identical to the original</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">sensor_data</span>, <span class="va">read_sensor_data</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<blockquote>
<p><strong>Safety First:</strong> <code>h5lite</code> reads all numeric
HDF5 types (integers, floats, etc.) into R’s <code>numeric</code>
(double-precision) vectors. This is an intentional design choice to
prevent integer overflow, a common bug when reading data from other
systems.</p>
</blockquote>
</div>
<div class="section level2">
<h2 id="working-with-metadata-attributes">4. Working with Metadata (Attributes)<a class="anchor" aria-label="anchor" href="#working-with-metadata-attributes"></a>
</h2>
<p>Attributes are small pieces of metadata attached to datasets or
groups. They are perfect for storing things like units, configuration
parameters, or version info.</p>
<p>Let’s add some attributes to our <code>sensor_readings</code>
dataset.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add a scalar string attribute for units</span></span>
<span><span class="fu"><a href="../reference/h5_write_attr.html">h5_write_attr</a></span><span class="op">(</span><span class="va">file</span>, <span class="st">"experiment_1/sensor_readings"</span>, <span class="st">"units"</span>, <span class="st">"celsius"</span>, dims <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add a numeric vector attribute for calibration coefficients</span></span>
<span><span class="fu"><a href="../reference/h5_write_attr.html">h5_write_attr</a></span><span class="op">(</span><span class="va">file</span>, <span class="st">"experiment_1/sensor_readings"</span>, <span class="st">"calibration"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.02</span>, <span class="op">-</span><span class="fl">0.5</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>You can list and read attributes using <code><a href="../reference/h5_ls_attr.html">h5_ls_attr()</a></code> and
<code><a href="../reference/h5_read_attr.html">h5_read_attr()</a></code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/h5_ls_attr.html">h5_ls_attr</a></span><span class="op">(</span><span class="va">file</span>, <span class="st">"experiment_1/sensor_readings"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "units"       "calibration"</span></span>
<span></span>
<span><span class="va">units</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/h5_read_attr.html">h5_read_attr</a></span><span class="op">(</span><span class="va">file</span>, <span class="st">"experiment_1/sensor_readings"</span>, <span class="st">"units"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">units</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "celsius"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="recursive-io-with-lists-h5_write_all-and-h5_read_all">5. Recursive I/O with Lists (<code>h5_write_all</code> and
<code>h5_read_all</code>)<a class="anchor" aria-label="anchor" href="#recursive-io-with-lists-h5_write_all-and-h5_read_all"></a>
</h2>
<p>For more complex data structures, <code>h5lite</code> provides
<code><a href="../reference/h5_write_all.html">h5_write_all()</a></code> and <code><a href="../reference/h5_read_all.html">h5_read_all()</a></code> to seamlessly
save and load nested R <code>list</code> objects.</p>
<ul>
<li>R <code>list</code> objects are saved as HDF5
<strong>groups</strong>.</li>
<li>Attributes on a <code>list</code> are saved as attributes on the
corresponding group.</li>
<li>All other objects inside the list (vectors, matrices, etc.) are
saved as <strong>datasets</strong>.</li>
</ul>
<p>This allows you to perform a “round-trip” for a complex R object,
preserving its structure and metadata.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a nested list with attributes</span></span>
<span><span class="va">my_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  config <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>version <span class="op">=</span> <span class="fl">1.2</span>, user <span class="op">=</span> <span class="st">"test"</span><span class="op">)</span>,</span>
<span>  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    matrix <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>    vector <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">my_list</span><span class="op">$</span><span class="va">data</span>, <span class="st">"info"</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"This is the data group"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">my_list</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">matrix</span>, <span class="st">"my_attr"</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"matrix attribute"</span></span>
<span></span>
<span><span class="co"># Write the entire list to a group called "session_data"</span></span>
<span><span class="fu"><a href="../reference/h5_write_all.html">h5_write_all</a></span><span class="op">(</span><span class="va">file</span>, <span class="st">"session_data"</span>, <span class="va">my_list</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Read it all back in one command</span></span>
<span><span class="va">read_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/h5_read_all.html">h5_read_all</a></span><span class="op">(</span><span class="va">file</span>, <span class="st">"session_data"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Verify the round-trip was successful</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="va">my_list</span>, <span class="va">read_list</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="handling-special-r-types">6. Handling Special R Types<a class="anchor" aria-label="anchor" href="#handling-special-r-types"></a>
</h2>
<p><code>h5lite</code> has special support for some of R’s unique data
types.</p>
<div class="section level3">
<h3 id="factors">Factors<a class="anchor" aria-label="anchor" href="#factors"></a>
</h3>
<p>When you write an R <code>factor</code>, <code>h5lite</code>
automatically saves it as a native HDF5 <code>ENUM</code> type,
preserving both the integer values and the character labels.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">conditions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"control"</span>, <span class="st">"treatment_A"</span>, <span class="st">"treatment_B"</span><span class="op">)</span>, <span class="fl">12</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/h5_write.html">h5_write</a></span><span class="op">(</span><span class="va">file</span>, <span class="st">"experiment_1/conditions"</span>, <span class="va">conditions</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Let's check the on-disk type</span></span>
<span><span class="fu"><a href="../reference/h5_typeof.html">h5_typeof</a></span><span class="op">(</span><span class="va">file</span>, <span class="st">"experiment_1/conditions"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "ENUM"</span></span>
<span></span>
<span><span class="co"># Read it back - it's a perfect match!</span></span>
<span><span class="va">read_conditions</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/h5_read.html">h5_read</a></span><span class="op">(</span><span class="va">file</span>, <span class="st">"experiment_1/conditions"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="va">conditions</span>, <span class="va">read_conditions</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="raw-data">Raw Data<a class="anchor" aria-label="anchor" href="#raw-data"></a>
</h3>
<p>To store binary data, use an R <code>raw</code> vector. This stores
the data as a sequence of bytes.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">binary_blob</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/raw.html" class="external-link">as.raw</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0xDE</span>, <span class="fl">0xAD</span>, <span class="fl">0xBE</span>, <span class="fl">0xEF</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/h5_write.html">h5_write</a></span><span class="op">(</span><span class="va">file</span>, <span class="st">"experiment_1/binary_config"</span>, <span class="va">binary_blob</span><span class="op">)</span></span>
<span></span>
<span><span class="va">read_blob</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/h5_read.html">h5_read</a></span><span class="op">(</span><span class="va">file</span>, <span class="st">"experiment_1/binary_config"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="va">binary_blob</span>, <span class="va">read_blob</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="managing-file-contents">7. Managing File Contents<a class="anchor" aria-label="anchor" href="#managing-file-contents"></a>
</h2>
<div class="section level3">
<h3 id="overwriting">Overwriting<a class="anchor" aria-label="anchor" href="#overwriting"></a>
</h3>
<p><code>h5lite</code> follows an “overwrite-by-default” philosophy. If
you write to an existing path, the old data is replaced.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/h5_read.html">h5_read</a></span><span class="op">(</span><span class="va">file</span>, <span class="st">"experiment_1/run_id"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "run-abc-123"</span></span>
<span></span>
<span><span class="co"># Overwrite with a new value</span></span>
<span><span class="fu"><a href="../reference/h5_write.html">h5_write</a></span><span class="op">(</span><span class="va">file</span>, <span class="st">"experiment_1/run_id"</span>, <span class="st">"run-xyz-987"</span>, dims <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/h5_read.html">h5_read</a></span><span class="op">(</span><span class="va">file</span>, <span class="st">"experiment_1/run_id"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "run-xyz-987"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="deleting-objects">Deleting Objects<a class="anchor" aria-label="anchor" href="#deleting-objects"></a>
</h3>
<p>You can explicitly delete datasets, groups, or attributes.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Delete a single dataset</span></span>
<span><span class="fu"><a href="../reference/h5_delete.html">h5_delete</a></span><span class="op">(</span><span class="va">file</span>, <span class="st">"experiment_1/trial_ids"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Delete an attribute</span></span>
<span><span class="fu"><a href="../reference/h5_delete_attr.html">h5_delete_attr</a></span><span class="op">(</span><span class="va">file</span>, <span class="st">"experiment_1/sensor_readings"</span>, <span class="st">"calibration"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Delete an entire group and all its contents</span></span>
<span><span class="fu"><a href="../reference/h5_delete_group.html">h5_delete_group</a></span><span class="op">(</span><span class="va">file</span>, <span class="st">"old_data"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in h5_delete_group(file, "old_data"): Object 'old_data' not found.</span></span>
<span><span class="co">#&gt; Nothing to delete.</span></span>
<span></span>
<span><span class="fu"><a href="../reference/h5_ls.html">h5_ls</a></span><span class="op">(</span><span class="va">file</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "experiment_1"                 "experiment_1/binary_config"  </span></span>
<span><span class="co">#&gt;  [3] "experiment_1/conditions"      "experiment_1/run_id"         </span></span>
<span><span class="co">#&gt;  [5] "experiment_1/sensor_readings" "session_data"                </span></span>
<span><span class="co">#&gt;  [7] "session_data/config"          "session_data/config/user"    </span></span>
<span><span class="co">#&gt;  [9] "session_data/config/version"  "session_data/data"           </span></span>
<span><span class="co">#&gt; [11] "session_data/data/matrix"     "session_data/data/vector"</span></span></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Clean up the temporary file</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Daniel P. Smith.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

      </footer>
</div>






  </body>
</html>
